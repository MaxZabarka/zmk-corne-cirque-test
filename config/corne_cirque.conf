# USB Debugging Configuration for Corne Cirque

# Enable USB logging
CONFIG_ZMK_USB_LOGGING=y

# Enable console and UART for debugging
CONFIG_LOG=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_SERIAL=y

# Enable USB device support
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_DEVICE_INITIALIZE_AT_BOOT=y

# Configure logging levels
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_MAX_LEVEL=4
CONFIG_LOG_PRINTK=y

# Enable ZMK specific logging
CONFIG_ZMK_LOG_LEVEL_DBG=y

# Enable HID and USB HID for debugging
CONFIG_USB_HID_LOG_LEVEL_DBG=y

# Enable BLE logging if using wireless
CONFIG_BT_DEBUG_LOG=y
CONFIG_BT_SMP_LOG_LEVEL_DBG=y

# Enable pointing device debugging
CONFIG_ZMK_MOUSE_LOG_LEVEL_DBG=y

# --- Core logging ---
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=4            # 0 none, 1 err, 2 warn, 3 info, 4 dbg
CONFIG_LOG_PROCESS_THREAD=y
CONFIG_LOG_BUFFER_SIZE=4096
CONFIG_LOG_RUNTIME_FILTERING=y
CONFIG_LOG_BACKEND_USB=y
CONFIG_LOG_BACKEND_UART=n
CONFIG_LOG_BACKEND_RTT=n
CONFIG_LOG_TIMESTAMP=y
CONFIG_THREAD_NAME=y
CONFIG_ASSERT=y

# --- USB CDC ACM console (virtual COM port) ---
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_DEVICE_PRODUCT="ZMK Keyboard Debug"
CONFIG_CONSOLE=y
CONFIG_SERIAL=y

# --- Shell on the USB console (handy for I²C scan) ---
CONFIG_SHELL=y
CONFIG_SHELL_BACKEND_SERIAL=y
CONFIG_SHELL_CMDS=y

# I²C shell helper (provides: `i2c scan`, `i2c read`, `i2c write`)
CONFIG_I2C=y
CONFIG_I2C_SHELL=y

# Raise module log verbosity for common drivers while debugging
CONFIG_I2C_LOG_LEVEL=4
CONFIG_GPIO_LOG_LEVEL=4
# Optional, if you are debugging sensor drivers:
# CONFIG_SENSOR=y
# CONFIG_SENSOR_LOG_LEVEL=4
